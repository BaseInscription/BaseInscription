import{af as I,ag as N,X as _}from"./element-plus-01463170.js";import{C as V,I as B}from"./ChainHelper-37f66626.js";import{_ as P,u as S}from"./index-35adf578.js";import{a8 as o,m as a,q as u,t as l,H as t,B as i,F as h,E as p,G as A,W as E,A as H}from"./vue-vendor-883c323d.js";import"./abi-d39c13d1.js";import"./ethers-86161a64.js";const W={name:"TextIndexerPage",components:{CircleCheckFilled:I,CircleCloseFilled:N},data(){return{searchText:"",searching:!1,searched:!1,foundResults:[],notFoundResults:[]}},computed:{walletStore(){return S()}},methods:{async searchTexts(){if(!this.searchText.trim()){this.$message.warning("Please enter text to search");return}const r=this.searchText.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);if(r.length===0){this.$message.warning("No valid text to search");return}if(r.length>50){this.$message.warning("Maximum 50 lines allowed");return}const s=new TextEncoder;for(const n of r)if(s.encode(n).length>128){this.$message.error(`Text too long(max 128 bytes): ${n.substring(0,20)}...`);return}this.searching=!0;try{const n=V.getProvider(),e=await new B(n).findFirstInlines(r);this.foundResults=[],this.notFoundResults=[];for(let d=0;d<r.length;d++){const f=Number(e[d]);f>0?this.foundResults.push({content:r[d],id:f}):this.notFoundResults.push({content:r[d]})}this.searched=!0}catch(n){console.error("Failed to search texts:",n),this.$message.error("Failed to search texts")}finally{this.searching=!1}}}},q={class:"page-container"},z={class:"search-section"},D={key:0,class:"results-section"},G={class:"results-grid"},L={key:0,class:"found-section"},M={class:"section-title"},O={class:"text-content"},U={key:1,class:"notfound-section"},X={class:"section-title"},j={class:"available-list"},J={class:"available-content"},K={class:"text-content"},Q={key:0,class:"empty-state"},Y={key:1,class:"empty-state"};function Z(r,s,n,m,e,d){const f=o("el-input"),v=o("el-button"),C=o("CircleCheckFilled"),g=o("el-icon"),x=o("el-table-column"),y=o("router-link"),F=o("el-table"),k=o("CircleCloseFilled"),R=o("el-tag"),T=o("el-card"),b=o("el-result");return a(),u("div",q,[s[3]||(s[3]=l("h1",{class:"page-title"},"Text Finder",-1)),s[4]||(s[4]=l("p",{class:"description"}," Find first inscription of short texts (lengthâ‰¤128). One per line. ",-1)),l("div",z,[t(f,{modelValue:e.searchText,"onUpdate:modelValue":s[0]||(s[0]=c=>e.searchText=c),type:"textarea",rows:15,placeholder:`Satoshi
Base`,disabled:e.searching},null,8,["modelValue","disabled"]),t(v,{type:"primary",class:"search-button",loading:e.searching,onClick:d.searchTexts},{default:i(()=>[...s[1]||(s[1]=[h(" Search Texts ",-1)])]),_:1},8,["loading","onClick"])]),e.searched?(a(),u("div",D,[l("div",G,[e.foundResults.length>0?(a(),u("div",L,[l("h3",M,[t(g,{color:"#67C23A"},{default:i(()=>[t(C)]),_:1}),h(" Found ("+_(e.foundResults.length)+") ",1)]),t(F,{data:e.foundResults,stripe:"",class:"found-table","show-header":!0},{default:i(()=>[t(x,{label:"Text Content",prop:"content"},{default:i(({row:c})=>[l("div",O,_(c.content),1)]),_:1}),t(x,{label:"Inscription",width:"150",align:"center"},{default:i(({row:c})=>[t(y,{to:`/detail/${c.id}`,class:"inscription-link"},{default:i(()=>[h(" #"+_(c.id),1)]),_:2},1032,["to"])]),_:1})]),_:1},8,["data"])])):p("",!0),e.notFoundResults.length>0?(a(),u("div",U,[l("h3",X,[t(g,{color:"#F56C6C"},{default:i(()=>[t(k)]),_:1}),h(" Available ("+_(e.notFoundResults.length)+") ",1)]),l("div",j,[(a(!0),u(A,null,E(e.notFoundResults,(c,w)=>(a(),H(T,{key:w,class:"available-card",shadow:"hover"},{default:i(()=>[l("div",J,[l("div",K,_(c.content),1),t(R,{type:"info",size:"small"},{default:i(()=>[...s[2]||(s[2]=[h("Not inscribed yet",-1)])]),_:1})])]),_:2},1024))),128))])])):p("",!0)]),e.notFoundResults.length===0&&e.foundResults.length>0?(a(),u("div",Q,[t(b,{icon:"success",title:"All texts have been inscribed!"})])):p("",!0),e.foundResults.length===0&&e.notFoundResults.length>0?(a(),u("div",Y,[t(b,{icon:"info",title:"None of the texts have been inscribed yet"})])):p("",!0)])):p("",!0)])}const le=P(W,[["render",Z],["__scopeId","data-v-6a4f0bd9"]]);export{le as default};
