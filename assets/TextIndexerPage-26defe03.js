import{_ as I,bU as N,bV as V,u as B,r as o,o as a,c as u,b as l,f as t,q as i,s as _,t as h,e as p,F as P,d as S,D as A}from"./index-32c8d712.js";import{C as D,I as E}from"./ChainHelper-50e008c3.js";import"./abi-581a5ddb.js";const U={name:"TextIndexerPage",components:{CircleCheckFilled:N,CircleCloseFilled:V},data(){return{searchText:"",searching:!1,searched:!1,foundResults:[],notFoundResults:[]}},computed:{walletStore(){return B()}},methods:{async searchTexts(){if(!this.searchText.trim()){this.$message.warning("Please enter text to search");return}const c=this.searchText.split(`
`).map(n=>n.trim()).filter(n=>n.length>0);if(c.length===0){this.$message.warning("No valid text to search");return}if(c.length>50){this.$message.warning("Maximum 50 lines allowed");return}const s=new TextEncoder;for(const n of c)if(s.encode(n).length>128){this.$message.error(`Text too long(max 128 bytes): ${n.substring(0,20)}...`);return}this.searching=!0;try{const n=D.getProvider(),e=await new E(n).findFirstInlines(c);this.foundResults=[],this.notFoundResults=[];for(let d=0;d<c.length;d++){const f=Number(e[d]);f>0?this.foundResults.push({content:c[d],id:f}):this.notFoundResults.push({content:c[d]})}this.searched=!0}catch(n){console.error("Failed to search texts:",n),this.$message.error("Failed to search texts")}finally{this.searching=!1}}}},q={class:"page-container"},z={class:"search-section"},H={key:0,class:"results-section"},L={class:"results-grid"},M={key:0,class:"found-section"},O={class:"section-title"},W={class:"text-content"},j={key:1,class:"notfound-section"},G={class:"section-title"},J={class:"available-list"},K={class:"available-content"},Q={class:"text-content"},X={key:0,class:"empty-state"},Y={key:1,class:"empty-state"};function Z(c,s,n,m,e,d){const f=o("el-input"),v=o("el-button"),C=o("CircleCheckFilled"),g=o("el-icon"),x=o("el-table-column"),y=o("router-link"),F=o("el-table"),k=o("CircleCloseFilled"),R=o("el-tag"),T=o("el-card"),b=o("el-result");return a(),u("div",q,[s[3]||(s[3]=l("h1",{class:"page-title"},"Text Finder",-1)),s[4]||(s[4]=l("p",{class:"description"}," Find first inscription of short texts (lengthâ‰¤128). One per line. ",-1)),l("div",z,[t(f,{modelValue:e.searchText,"onUpdate:modelValue":s[0]||(s[0]=r=>e.searchText=r),type:"textarea",rows:15,placeholder:`Satoshi
Base`,disabled:e.searching},null,8,["modelValue","disabled"]),t(v,{type:"primary",class:"search-button",loading:e.searching,onClick:d.searchTexts},{default:i(()=>[...s[1]||(s[1]=[_(" Search Texts ",-1)])]),_:1},8,["loading","onClick"])]),e.searched?(a(),u("div",H,[l("div",L,[e.foundResults.length>0?(a(),u("div",M,[l("h3",O,[t(g,{color:"#67C23A"},{default:i(()=>[t(C)]),_:1}),_(" Found ("+h(e.foundResults.length)+") ",1)]),t(F,{data:e.foundResults,stripe:"",class:"found-table","show-header":!0},{default:i(()=>[t(x,{label:"Text Content",prop:"content"},{default:i(({row:r})=>[l("div",W,h(r.content),1)]),_:1}),t(x,{label:"Inscription",width:"150",align:"center"},{default:i(({row:r})=>[t(y,{to:`/detail/${r.id}`,class:"inscription-link"},{default:i(()=>[_(" #"+h(r.id),1)]),_:2},1032,["to"])]),_:1})]),_:1},8,["data"])])):p("",!0),e.notFoundResults.length>0?(a(),u("div",j,[l("h3",G,[t(g,{color:"#F56C6C"},{default:i(()=>[t(k)]),_:1}),_(" Available ("+h(e.notFoundResults.length)+") ",1)]),l("div",J,[(a(!0),u(P,null,S(e.notFoundResults,(r,w)=>(a(),A(T,{key:w,class:"available-card",shadow:"hover"},{default:i(()=>[l("div",K,[l("div",Q,h(r.content),1),t(R,{type:"info",size:"small"},{default:i(()=>[...s[2]||(s[2]=[_("Not inscribed yet",-1)])]),_:1})])]),_:2},1024))),128))])])):p("",!0)]),e.notFoundResults.length===0&&e.foundResults.length>0?(a(),u("div",X,[t(b,{icon:"success",title:"All texts have been inscribed!"})])):p("",!0),e.foundResults.length===0&&e.notFoundResults.length>0?(a(),u("div",Y,[t(b,{icon:"info",title:"None of the texts have been inscribed yet"})])):p("",!0)])):p("",!0)])}const se=I(U,[["render",Z],["__scopeId","data-v-6a4f0bd9"]]);export{se as default};
